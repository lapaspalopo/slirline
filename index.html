<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SLIRLINE LAPAS PALOPO</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #1e40af;
      --secondary: #0369a1;
      --accent: #0284c7;
      --light: #f0f9ff;
      --dark: #0f172a;
      --success: #1a1c1a29;
      --success-text: #0c1ae8;
      --error: #fee2e2;
      --error-text: #991b1b;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Poppins', Arial, sans-serif;
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      color: var(--dark);
    }
    
    header {
      background: linear-gradient(to right, var(--primary), var(--secondary));
      width: 100%;
      padding: 1.5rem;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1.5rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    
    header img {
      height: 70px;
      filter: drop-shadow(0px 2px 4px rgba(0, 0, 0, 0.2));
    }
    
    header h1 {
      font-size: 1.6rem;
      font-weight: 700;
      text-align: center;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
      line-height: 1.2;
    }
    
    main {
      margin: 2rem auto;
      background: white;
      padding: 2.5rem;
      border-radius: 12px;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      width: 90%;
      max-width: 550px;
      position: relative;
      overflow: hidden;
    }
    
    main::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 6px;
      background: linear-gradient(to right, var(--primary), var(--accent));
    }
    
    main h1 {
      color: var(--primary);
      font-size: 1.0rem;
      margin-bottom: 1.5rem;
      text-align: center;
      font-weight: 600;
    }
    
    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--dark);
    }
    
    input {
      display: block;
      width: 100%;
      padding: 0.75rem 1rem;
      margin-bottom: 1.5rem;
      border: 1px solid #cbd5e1;
      border-radius: 6px;
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    
    input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(2, 132, 199, 0.2);
    }
    
    button {
      display: block;
      width: 100%;
      padding: 0.9rem;
      background: linear-gradient(to right, var(--primary), var(--accent));
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 8px -1px rgba(0, 0, 0, 0.15);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    .result {
      margin-top: 1.5rem;
      padding: 1.5rem;
      border-radius: 8px;
      display: none;
      animation: fadeIn 0.5s ease;
    }
    
    .success {
      background-color: var(--success);
      color: var(--success-text);
      border-left: 2px solid #16a34a;
      display: block;
    }
    
    .error {
      background-color: var(--error);
      color: var(--error-text);
      border-left: 4px solid #dc2626;
      display: block;
    }
    
    .result h5 {
      margin: 1rem 0 0.5rem;
      font-size: 1.1rem;
      font-weight: 400;
      color: var(--dark);
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      padding-bottom: 0.5rem;
    }
    
    .result strong {
      font-weight: 50;
    }
    
    .result a {
      display: inline-block;
      margin-top: 0.5rem;
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
      padding: 0.5rem 1rem;
      background-color: rgba(30, 64, 175, 0.1);
      border-radius: 4px;
      transition: all 0.3s ease;
    }
    
    .result a:hover {
      background-color: rgba(30, 64, 175, 0.2);
    }
    
    footer {
      margin-top: auto;
      padding: 1.5rem;
      background: var(--dark);
      width: 100%;
      text-align: center;
      color: white;
    }
    
    footer a {
      color: #193ffc;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
    }
    
    footer a:hover {
      color: #0a0ef7;
      text-decoration: underline;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @media (max-width: 640px) {
      header {
        flex-direction: column;
        gap: 1rem;
        padding: 1rem;
      }
      
      main {
        padding: 1.0rem;
      }
      
      header img {
        height: 60px;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="https://upload.wikimedia.org/wikipedia/commons/0/00/Logo_Kementrian_Imigrasi_dan_Pemasyarakatan_%282024%29.png" alt="Logo Kementerian" />
    <h1>SLIRLINE<br>LAPAS PALOPO</h1>
  </header>
 
  <main>
  <h1>Cek Rincian Tunjangan Kinerja</h1>

  <label for="nisn">Masukkan Password:</label>
  <div style="position: relative;">
    <input type="password" id="nisn" placeholder="masukkan password anda" style="padding-right: 3rem;" />

    <!-- SVG Eye Icon -->
    <svg id="togglePassword" xmlns="http://www.w3.org/2000/svg" fill="none"
         viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"
         style="
           width: 24px;
           height: 24px;
           position: absolute;
           right: 1rem;
           top: 50%;
           transform: translateY(-50%);
           cursor: pointer;
           color: #64748b;"
    >
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
    </svg>
  </div>

  <button onclick="cekKelulusan()">Periksa Rincian Tunjangan Kinerja</button>
  <div id="hasil" class="result"></div>
</main>

<script>
  const passwordInput = document.getElementById("nisn");
  const toggleIcon = document.getElementById("togglePassword");

  let isVisible = false;

  toggleIcon.addEventListener("click", function () {
    isVisible = !isVisible;
    passwordInput.type = isVisible ? "text" : "password";
    toggleIcon.innerHTML = isVisible
      ? `<path stroke-linecap="round" stroke-linejoin="round"
           d="M13.875 18.825A10.05 10.05 0 0112 19c-4.477 0-8.268-2.943-9.542-7a9.956 9.956 0 012.122-3.368m3.578-2.266A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.542 7a9.972 9.972 0 01-4.257 5.317M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
         <path stroke-linecap="round" stroke-linejoin="round"
           d="M3 3l18 18" />`
      : `<path stroke-linecap="round" stroke-linejoin="round"
           d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
         <path stroke-linecap="round" stroke-linejoin="round"
           d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />`;
  });

  function cekKelulusan() {
    const hasil = document.getElementById("hasil");
    hasil.innerHTML = "<strong>Contoh hasil:</strong> Data berhasil diperiksa.";
    hasil.classList.add("success");
    hasil.style.display = "block";
  }
    </script>
  
  <footer>
    &copy; 2025 Developed by Hasdan <a href="https://lapaspalopo.kemenkumham.go.id" target="_blank">Lapas Palopo Hebat</a>
  </footer>

  <script>
    async function cekKelulusan() {
      const nisn = document.getElementById('nisn').value.trim();
      const hasil = document.getElementById('hasil');
      
      if (!nisn) {
        hasil.className = 'result error';
        hasil.innerHTML = 'Silakan masukkan password terlebih dahulu.';
        return;
      }
      
      hasil.innerHTML = '<div style="text-align: center; padding: 1rem;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="animation: rotate 1s linear infinite;"><circle cx="12" cy="12" r="10"></circle><path d="M16 12h2"></path></svg><p style="margin-top: 0.5rem;">Memproses Rincian Tukin...</p></div>';
      hasil.className = 'result';
      hasil.style.display = 'block';

      // URL dari Apps Script Web App
      const url = `https://script.google.com/macros/s/AKfycbx251tv-JcBjdpK_r0DnlYFlYUEH6em1PozaANeJp9SJQkcyeBJCcU6A97gofZ6MSLl/exec?nisn=${nisn}`;

      try {
        const response = await fetch(url);
        const data = await response.json();

        if (data && data.found) {
          hasil.className = 'result success';
          hasil.innerHTML = `
            <div style="display: flex; align-items: center; margin-bottom: 1rem;">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#1328c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
              <span style="margin-left: 0.5rem; font-weight: 600; font-size: 1.0rem;">Data Ditemukan</span>
            </div>
            <p style="font-size: 1.1rem; font-weight: 600; color: var(--dark); margin-bottom: 0.5rem;">${data.nama}</p>
            <p style="font-size: 1.0rem; font-weight: 600; color: var(--dark); margin-bottom: 0.5rem;"><div><strong>Periode Tukin :</strong>${data.bulan}</p>
            <p style="font-size: 1.0rem; font-weight: 600; color: var(--dark); margin-bottom: 0.5rem;"><div><strong>Jumlah Tukin :</strong>Rp.${data.tukin.toLocaleString('id-ID')}</p>
            <p style="font-size: 1.0rem; font-weight: 600; color: var(--dark); margin-bottom: 0.5rem;"><div><strong>Jumlah Potongan :</strong>${data.potongan_tukin.toLocaleString('id-ID')}</p>
            <p style="font-size: 1.0rem; font-weight: 600; color: var(--dark); margin-bottom: 0.5rem;"><div><strong>Total Diterima :</strong>${data.jumlah_diterima.toLocaleString('id-ID')}</p>
            <h5>Rincian Slip Remun Online : </h5>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.3rem; margin-bottom: 0.3rem;">
              <div><strong>Koperasi:</strong> ${data.koperasi.toLocaleString('id-ID')}</div>
              <div><strong>Sumbangan Mesjid:</strong> ${data.sumbangan_mesjid.toLocaleString('id-ID')}</div>
              <div><strong>Arisan DWP:</strong> ${data.arisan_dwp.toLocaleString('id-ID')}</div>
              <div><strong>Simpanan DWP:</strong> ${data.simpanan_dwp.toLocaleString('id-ID')}</div>
              <div><strong>Arisan Pipas:</strong> ${data.arisan_pipas.toLocaleString('id-ID')}</div>
              <div><strong>Arisan Pengayoman:</strong> ${data.arisan_pengayoman.toLocaleString('id-ID')}</div>
              <div><strong>Denda:</strong> ${data.denda_dwp.toLocaleString('id-ID')}</div>
              <div><strong>Pinjaman DWP:</strong> ${data.pinjaman_dwp.toLocaleString('id-ID')}</div>
              <div><strong>Potongan Tukin:</strong> ${data.potongan_tukin.toLocaleString('id-ID')}</div>
              <div><strong>Jumlah Diterima:</strong> ${data.jumlah_diterima.toLocaleString('id-ID')}</div>
              <div><strong>Bulan:</strong> ${data.bulan.toLocaleString('id-ID')}</div>
            </div>
            
            <h5>Download Bukti Rincian</h5>
            <a href="${data.link}" target="_blank" download>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 5px;"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
              Download Rincian Tunjangan Kinerja
            </a>
          `;
        } else {
          hasil.className = 'result error';
          hasil.innerHTML = `
            <div style="display: flex; align-items: center;">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#991b1b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>
              <span style="margin-left: 0.5rem; font-weight: 600;">Password Salah</span>
            </div>
            <p style="margin-top: 0.5rem;">Silakan periksa kembali password yang Anda masukkan, harap koordinasikan ke bagian TU Lapas Palopo</p>
          `;
        }
      } catch (error) {
        hasil.className = 'result error';
        hasil.innerHTML = `
          <div style="display: flex; align-items: center;">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#991b1b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
            <span style="margin-left: 0.5rem; font-weight: 600;">Terjadi Kesalahan</span>
          </div>
          <p style="margin-top: 0.5rem;">Sistem sedang mengalami gangguan. Silakan coba lagi nanti.</p>
        `;
      }
    }
    
    // Tambahkan event listener untuk input agar bisa submit dengan Enter
    document.getElementById('nisn').addEventListener('keypress', function(event) {
      if (event.key === 'Enter') {
        cekKelulusan();
      }
    });
    
    // Animasi untuk loading
    document.head.insertAdjacentHTML('beforeend', `
      <style>
        @keyframes rotate {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      </style>
    `);
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'94a47f0c965c1a58',t:'MTc0OTAwOTM0My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
